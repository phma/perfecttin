<article xmlns='http://docbook.org/ns/docbook'>
<info>
<title>PerfectTIN File Format</title>
<author><personname>
<firstname>Pierre</firstname>
<surname>Abbat</surname>
</personname>
<personblurb>NC PLS</personblurb>
</author>
<pubdate>2019</pubdate>
</info>

<section id="intro">
<title>Introduction</title>
<para>PerfectTIN format is a file format for a TIN with included point cloud. It is used by PerfectTIN to save checkpoint files as it computes the TIN and to save the final result.</para>
</section>

<section id="overview">
  <title>Overview</title>
  <para>The file consists of five sections: header, points, convex hull, triangles (with dots), and checksums. All numbers in the file are little-endian.</para>
</section>

<section id="units">
  <title>Units</title>
  <para>PerfectTIN can read and write files in meters, international feet, US survey feet, and Indian survey feet. Internally, it holds all coordinates in meters.</para>
  <para>You can set the unit in two places: <menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure</guimenuitem></menuchoice> and the toolbar. Also, whenever a TIN is displayed on the screen, it shows a scale in meters or feet.</para>
</section>

<section id="maketin">
<title>Making a TIN</title>
<para>To make a TIN, do the following:</para>
<orderedlist>
  <listitem>
    <para>Set the unit with the toolbar button.</para>
  </listitem>
  <listitem>
    <para>Load the point cloud file with <menuchoice><guimenu>File</guimenu><guimenuitem>Load</guimenuitem></menuchoice>.</para>
  </listitem>
  <listitem>
    <para>If the point cloud is in more than one file, load the other files.</para>
  </listitem>
  <listitem>
    <para>Set the vertical tolerance with <menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure</guimenuitem></menuchoice>.</para>
  </listitem>
  <listitem>
    <para>Start the conversion with <menuchoice><guimenu>File</guimenu><guimenuitem>Convert</guimenuitem></menuchoice>.</para>
  </listitem>
</orderedlist>
</section>
</article>

<section id="resume">
  <title>Resuming an interrupted conversion</title>
  <para>If converting a point cloud to TIN has been interrupted, for example by a power failure, you can resume it. Let's say that you were converting <filename>foo.las</filename> to <filename>foo.ptin</filename> and the computer crashed in the middle of the process.</para>
  <orderedlist>
    <listitem>
      <para>Start PerfectTIN.</para>
    </listitem>
    <listitem>
      <para>Do <menuchoice><guimenu>File</guimenu><guimenuitem>Open</guimenuitem></menuchoice>, and look for two files with names like <filename>foo.16.ptin</filename> and <filename>foo.8.ptin</filename>. Open the one with the smaller number.</para>
    </listitem>
    <listitem>
      <para>If PerfectTIN says that the file was not completely written, open the one with the larger number. This means that the computer crashed while it was writing the file.</para>
    </listitem>
    <listitem>
      <para>Do <menuchoice><guimenu>File</guimenu><guimenuitem>Resume</guimenuitem></menuchoice>. The conversion will resume and hopefully run to completion.</para>
    </listitem>
  </orderedlist>
</section>

<section id="export">
  <title>Exporting a TIN</title>
  <para>PerfectTIN files are not readable by other programs. They are also big; they contain the point cloud as well as the TIN, so that PerfectTIN can resume converting a point cloud if it's interrupted. So you'll want to export the TIN in another format.</para>
  <para>Do <menuchoice><guimenu>File</guimenu><guisubmenu>Export</guisubmenu><guimenuitem><emphasis>format</emphasis></guimenuitem></menuchoice>, and enter the filename you want to export it as.</para>
  <para>PerfectTIN can export in DXF, TIN text (AquaVeo), Carlson TIN, and LandXML formats. The DXF format is the least efficient because each point of the TIN is written eight times on average: it belongs to six triangles, each of which is written as a 3DFACE element, in which one corner is written twice. The other formats consist of a list of points followed by a list of triangles, with each triangle being three point numbers. They take less space than DXF.</para>
</section>
